<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>AX • Home</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  :root{--bg:#fff;--ink:#0b1220;--muted:#6b7280;--line:#e7eaf0;--brand:#ff2433;}
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,system-ui;background:var(--bg);color:var(--ink)}
  header{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--line);z-index:40}
  .nav{max-width:1200px;margin:0 auto;padding:10px 16px;display:flex;gap:10px;align-items:center}
  .brand{font-weight:800;display:flex;align-items:center;gap:6px}
  .brand .ax{color:var(--brand)}
  .search{flex:1;display:flex;border:1px solid var(--line);border-radius:999px;padding:8px 12px;background:#f8fafc}
  .search input{all:unset;width:100%}
  main{max-width:1200px;margin:12px auto 80px;padding:0 16px}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:14px}
  .card{border:1px solid var(--line);border-radius:14px;overflow:hidden;}
  .thumb{aspect-ratio:16/9;background:#000;display:block}
  .thumb img{width:100%;height:100%;object-fit:cover}
  .meta{display:flex;gap:10px;padding:10px 12px}
  .avatar{width:36px;height:36px;background:#ddd;border-radius:999px}
  .title{font-weight:700;line-height:1.25}
  .sub{color:var(--muted);font-size:.9rem;margin-top:4px}
  .watch{padding:10px 12px}
  .btn{width:100%;border:1px solid var(--line);background:#f3f4f6;border-radius:10px;padding:8px;font-weight:600;cursor:pointer}
</style>
</head>
<body>

<header>
  <div class="nav">
    <div class="brand"><span class="ax">AX</span><span>Tube</span></div>
    <div class="search"><input id="q" placeholder="Search"></div>
  </div>
</header>

<main>
  <section class="grid" id="grid"></section>
</main>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<script>
const supabase = supabase.createClient(
  "https://ugccrbzcscjajcdoklzc.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVnY2NyYnpjc2NqYWpjZG9rbHpjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzMzE2MjEsImV4cCI6MjA3NzkwNzYyMX0.jIYISCxyRyJ48eeRK4W68UhvPnvSIN6atIsTtkEP_qo"
);

const grid = document.getElementById("grid");
const q = document.getElementById("q");
let all = [];

async function load(){
  const { data } = await supabase.from("videos").select("*").order("time", { ascending:false });
  all = data;
  render(all);
}

function render(list){
  grid.innerHTML = list.map(v => `
  <article class="card">
    <a class="thumb" href="stream.html?id=${v.id}"><img src="${v.thumbnail}"></a>
    <div class="meta">
      <div class="avatar"></div>
      <div>
        <div class="title">${v.title}</div>
        <div class="sub">${v.channel} • ${v.views} • ${v.time}</div>
      </div>
    </div>
    <div class="watch">
      <button class="btn" onclick="location.href='stream.html?id=${v.id}'">Watch</button>
    </div>
  </article>`).join("");
}

q.oninput = () => {
  const t = q.value.toLowerCase();
  render(all.filter(v => v.title.toLowerCase().includes(t)));
};

load();
</script>
</body>
</html>
